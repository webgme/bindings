language: node_js
services:
  - mongodb

cache:
  directories:
    - node_modules

node_js:
  - "8"
  - "10"
  - "12"

before_script:
  - "npm install webgme-engine"
  - "pyen install 3.6.0"
  - "pyenv global 3.6.0"
  - "sudo python -m pip install -U pip"
  - "cd python/webgme_bindings"
  - "sudo python -m pip install -e ."

script:
  - "npm run test"